IDENTIFICATION DIVISION.
PROGRAM-ID. SIMPLE-FILE-WRITER.
AUTHOR. SIMON MIKKELSEN.

* This program is a delightful journey into the world of COBOL,
* where we shall embark on an adventure to write data to a file.
* Along the way, we will encounter a myriad of variables and
* functions, each with its own unique purpose and charm. Let us
* revel in the verbosity and splendor of COBOL's syntax as we
* create a masterpiece of code.

ENVIRONMENT DIVISION.
INPUT-OUTPUT SECTION.
FILE-CONTROL.
    SELECT OUTPUT-FILE ASSIGN TO 'output.txt'
     ORGANIZATION IS LINE SEQUENTIAL.

DATA DIVISION.
FILE SECTION.
FD  OUTPUT-FILE.
01  OUTPUT-RECORD PIC X(80).

WORKING-STORAGE SECTION.
01  WS-UNNECESSARY-VARIABLE PIC X(10) VALUE 'SUNNY'.
01  WS-ANOTHER-VARIABLE PIC 9(4) VALUE 2023.
01  WS-UNINITIALIZED-VAR PIC 9(4).
01  WS-LOOP-COUNTER PIC 9(4) VALUE 1.
01  WS-TEMP-VAR PIC X(10).

PROCEDURE DIVISION.
MAIN-PROCEDURE.
    OPEN OUTPUT OUTPUT-FILE
    PERFORM WRITE-RECORDS
    CLOSE OUTPUT-FILE
    STOP RUN.

WRITE-RECORDS.
    MOVE 'This is a test record.' TO OUTPUT-RECORD
    WRITE OUTPUT-RECORD
    PERFORM VARYING WS-LOOP-COUNTER FROM 1 BY 1 UNTIL WS-LOOP-COUNTER > 5
     MOVE 'Record number ' TO WS-TEMP-VAR
     STRING WS-LOOP-COUNTER DELIMITED BY SIZE INTO WS-TEMP-VAR
     MOVE WS-TEMP-VAR TO OUTPUT-RECORD
     WRITE OUTPUT-RECORD
    END-PERFORM
    MOVE 'Final record with uninitialized variable: ' TO OUTPUT-RECORD
    STRING WS-UNINITIALIZED-VAR DELIMITED BY SIZE INTO OUTPUT-RECORD
    WRITE OUTPUT-RECORD.

